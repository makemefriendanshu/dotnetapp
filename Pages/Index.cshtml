@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<link href="~/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/css/icons.css" rel="stylesheet" type="text/css" />
<link href="~/css/style.css" rel="stylesheet" type="text/css" />

<div class="wrapper" style="padding-top: 60px;">
    <div class="container-fluid">
        <div class="row" style="margin: 0px 0px 0px -370px;width: 172%;">
            <div class="col-lg-14">
                <div class="card m-b-30">
                    <div class="card-body">

                        <button id="enter-exit-button" class="navbar-toggler" type="button" aria-expanded="false"
                            aria-label="Toggle navigation" onclick="getUserLocation()" style="border: ridge;">
                            Enter
                        </button>

                        <div id="lat-in" style="display:none"></div>
                        <div id="long-in" style="display:none"></div>
                        <div id="lat-out" style="display:none"></div>
                        <div id="long-out" style="display:none"></div>

                        <div style="display: flex;justify-content: space-between;">
                            <div id="gmaps-markers-in" class="gmaps" style="margin-top: 10px;width: 49%;"></div>
                            <div id="gmaps-markers-out" class="gmaps" style="margin-top: 10px;width: 49%;"></div>
                        </div>
                    </div>
                </div>
            </div> <!-- end col -->
        </div> <!-- end row -->

    </div> <!-- end container -->
</div>

<script src="~/js/jquery.min.js"></script>
<script src="~/js/popper.min.js"></script>
<script src="~/js/bootstrap.min.js"></script>
<script src="~/js/modernizr.min.js"></script>
<script src="~/js/waves.js"></script>
<script src="~/js/jquery.slimscroll.js"></script>
<script src="~/js/jquery.nicescroll.js"></script>
<script src="~/js/jquery.scrollTo.min.js"></script>

<!-- google maps api -->
<script src="http://maps.google.com/maps/api/js?key=AIzaSyCtSAR45TFgZjOs4nBFFZnII-6mMHLfSYI"></script>
<!-- Gmaps file -->
<script src="~/plugins/gmaps/gmaps.min.js"></script>
<!-- demo codes -->
<script src="~/pages/gmaps.js"></script>

<!-- App js -->
<script src="~/js/app.js"></script>


<script type="text/javascript">
    var in_location_lat = 0;
    var in_location_long = 0;

    function getUserLocation() {
        let type = document.getElementById("enter-exit-button").innerText;
        console.log(type)
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    if (type == 'Enter') {
                        in_location_lat = latitude;
                        in_location_long = longitude;
                        $("#lat-in")[0].innerText = latitude;
                        $("#long-in")[0].innerText = longitude;
                        $("#enter-exit-button")[0].innerText = 'Exit';
                    }

                    if (type == 'Exit') {
                        out_location_lat = latitude;
                        out_location_long = longitude;
                        $("#lat-out")[0].innerText = latitude;
                        $("#long-out")[0].innerText = longitude;
                        $("#enter-exit-button")[0].innerText = 'Enter';
                    }
                    console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);
                    // You can now use these coordinates in your application
                },
                (error) => {
                    switch (error.code) {
                        case error.PERMISSION_DENIED:
                            console.error("User denied the request for Geolocation.");
                            break;
                        case error.POSITION_UNAVAILABLE:
                            console.error("Location information is unavailable.");
                            break;
                        case error.TIMEOUT:
                            console.error("The request to get user location timed out.");
                            break;
                        case error.UNKNOWN_ERROR:
                            console.error("An unknown error occurred.");
                            break;
                    }
                }
            );
        } else {
            console.error("Geolocation is not supported by this browser.");
        }
    }

    // Call the function to request the user's location
    // getUserLocation();
</script>